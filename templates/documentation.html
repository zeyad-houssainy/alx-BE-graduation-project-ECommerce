{% extends 'base.html' %}

{% block title %}API Documentation - E-Commerce API{% endblock %}

{% block extra_css %}
<style>
    .doc-section {
        margin-bottom: 3rem;
        padding: 2rem;
        background: #f8f9fa;
        border-radius: 10px;
        border-left: 4px solid #007bff;
    }
    
    .endpoint-card {
        background: white;
        border: 1px solid #dee2e6;
        border-radius: 8px;
        padding: 1.5rem;
        margin-bottom: 1rem;
        box-shadow: 0 2px 4px rgba(0,0,0,0.1);
    }
    
    .endpoint-method {
        display: inline-block;
        padding: 0.25rem 0.75rem;
        border-radius: 4px;
        font-weight: bold;
        font-size: 0.875rem;
        text-transform: uppercase;
    }
    
    .method-get { background: #d4edda; color: #155724; }
    .method-post { background: #cce5ff; color: #004085; }
    .method-put { background: #fff3cd; color: #856404; }
    .method-delete { background: #f8d7da; color: #721c24; }
    
    .endpoint-url {
        font-family: 'Courier New', monospace;
        background: #f8f9fa;
        padding: 0.5rem;
        border-radius: 4px;
        margin: 0.5rem 0;
        word-break: break-all;
    }
    
    .code-block {
        background: #2d3748;
        color: #e2e8f0;
        padding: 1rem;
        border-radius: 6px;
        font-family: 'Courier New', monospace;
        overflow-x: auto;
        margin: 1rem 0;
    }
    
    .response-example {
        background: #f7fafc;
        border: 1px solid #e2e8f0;
        border-radius: 6px;
        padding: 1rem;
        margin: 1rem 0;
    }
    
    .auth-required {
        background: #fff5f5;
        border: 1px solid #fed7d7;
        color: #c53030;
        padding: 0.5rem;
        border-radius: 4px;
        font-size: 0.875rem;
        margin: 0.5rem 0;
    }
    
    .nav-pills .nav-link {
        border-radius: 20px;
        margin: 0.25rem;
    }
    
    .nav-pills .nav-link.active {
        background-color: #007bff;
    }
    
    .copy-btn {
        float: right;
        font-size: 0.75rem;
        padding: 0.25rem 0.5rem;
    }
    
    .table-of-contents {
        position: sticky;
        top: 2rem;
    }
    
    .example-tabs .nav-link {
        border-radius: 0;
        border: none;
        border-bottom: 2px solid transparent;
    }
    
    .example-tabs .nav-link.active {
        border-bottom-color: #007bff;
        background: transparent;
        color: #007bff;
    }
</style>
{% endblock %}

{% block content %}
<div class="container-fluid py-4">
    <div class="row">
        <!-- Table of Contents -->
        <div class="col-md-3">
            <div class="table-of-contents">
                <div class="card">
                    <div class="card-header">
                        <h5 class="mb-0"><i class="fas fa-list me-2"></i>Quick Navigation</h5>
                    </div>
                    <div class="card-body">
                        <nav class="nav flex-column">
                            <a class="nav-link" href="#overview">üìñ Overview</a>
                            <a class="nav-link" href="#authentication">üîê Authentication</a>
                            <a class="nav-link" href="#products">üì¶ Products</a>
                            <a class="nav-link" href="#categories">üè∑Ô∏è Categories</a>
                            <a class="nav-link" href="#users">üë• Users</a>
                            <a class="nav-link" href="#examples">üí° Examples</a>
                            <a class="nav-link" href="#errors">‚ö†Ô∏è Error Handling</a>
                            <a class="nav-link" href="#tools">üõ†Ô∏è Testing Tools</a>
                        </nav>
                    </div>
                </div>
            </div>
        </div>

        <!-- Main Documentation -->
        <div class="col-md-9">
            <div class="d-flex justify-content-between align-items-center mb-4">
                <h1 class="display-4"><i class="fas fa-book me-3"></i>API Documentation</h1>
                <div>
                    <a href="/api/" class="btn btn-outline-primary me-2">
                        <i class="fas fa-code me-1"></i>API Explorer
                    </a>
                    <a href="https://github.com/zeyad-houssainy/alx-BE-graduation-project-ECommerce" class="btn btn-outline-secondary" target="_blank" rel="noopener">
                        <i class="fab fa-github me-1"></i>GitHub
                    </a>
                </div>
            </div>

            <!-- Overview Section -->
            <section id="overview" class="doc-section">
                <h2><i class="fas fa-info-circle me-2"></i>Overview</h2>
                <p class="lead">Welcome to the E-Commerce API documentation. This API provides comprehensive endpoints for managing products, categories, users, and more.</p>
                
                <div class="row">
                    <div class="col-md-6">
                        <div class="card h-100">
                            <div class="card-body">
                                <h5 class="card-title"><i class="fas fa-rocket me-2"></i>Base URL</h5>
                                <code class="endpoint-url">http://127.0.0.1:8000/api/</code>
                                <p class="card-text">All API endpoints are relative to this base URL.</p>
                            </div>
                        </div>
                    </div>
                    <div class="col-md-6">
                        <div class="card h-100">
                            <div class="card-body">
                                <h5 class="card-title"><i class="fas fa-shield-alt me-2"></i>Authentication</h5>
                                <p class="card-text">Uses JWT (JSON Web Tokens) for secure authentication.</p>
                                <code class="endpoint-url">Authorization: Bearer &lt;token&gt;</code>
                            </div>
                        </div>
                    </div>
                </div>

                <div class="row mt-3">
                    <div class="col-md-6">
                        <div class="card h-100">
                            <div class="card-body">
                                <h5 class="card-title"><i class="fas fa-database me-2"></i>Data Format</h5>
                                <p class="card-text">All requests and responses use JSON format.</p>
                                <code class="endpoint-url">Content-Type: application/json</code>
                            </div>
                        </div>
                    </div>
                    <div class="col-md-6">
                        <div class="card h-100">
                            <div class="card-body">
                                <h5 class="card-title"><i class="fas fa-clock me-2"></i>Rate Limiting</h5>
                                <p class="card-text">Currently no rate limiting applied. Consider implementing for production.</p>
                            </div>
                        </div>
                    </div>
                </div>
            </section>

            <!-- Authentication Section -->
            <section id="authentication" class="doc-section">
                <h2><i class="fas fa-key me-2"></i>Authentication</h2>
                <p>Most API endpoints require authentication using JWT tokens. Here's how to get started:</p>

                <div class="endpoint-card">
                    <h5>1. User Registration</h5>
                    <span class="endpoint-method method-post">POST</span>
                    <div class="endpoint-url">/api/auth/register/</div>
                    <div class="auth-required">No authentication required</div>
                    
                    <h6>Request Body:</h6>
                    <div class="code-block">
{
  "username": "testuser",
  "email": "test@example.com",
  "password": "testpass123",
  "password_confirm": "testpass123",
  "first_name": "Test",
  "last_name": "User"
}
                    </div>
                    
                    <h6>Response:</h6>
                    <div class="response-example">
{
  "message": "User registered successfully",
  "user": {
    "id": 1,
    "username": "testuser",
    "email": "test@example.com"
  },
  "tokens": {
    "access": "eyJ0eXAiOiJKV1QiLCJhbGciOiJIUzI1NiJ9...",
    "refresh": "eyJ0eXAiOiJKV1QiLCJhbGciOiJIUzI1NiJ9..."
  }
}
                    </div>
                </div>

                <div class="endpoint-card">
                    <h5>2. User Login</h5>
                    <span class="endpoint-method method-post">POST</span>
                    <div class="endpoint-url">/api/auth/login/</div>
                    <div class="auth-required">No authentication required</div>
                    
                    <h6>Request Body:</h6>
                    <div class="code-block">
{
  "username": "testuser",
  "password": "testpass123"
}
                    </div>
                    
                    <h6>Response:</h6>
                    <div class="response-example">
{
  "access": "eyJ0eXAiOiJKV1QiLCJhbGciOiJIUzI1NiJ9...",
  "refresh": "eyJ0eXAiOiJKV1QiLCJhbGciOiJIUzI1NiJ9..."
}
                    </div>
                </div>

                <div class="endpoint-card">
                    <h5>3. Using the Token</h5>
                    <p>Include the access token in the Authorization header for all authenticated requests:</p>
                    <div class="code-block">
Authorization: Bearer eyJ0eXAiOiJKV1QiLCJhbGciOiJIUzI1NiJ9...
                    </div>
                </div>

                <div class="endpoint-card">
                    <h5>4. Token Refresh</h5>
                    <span class="endpoint-method method-post">POST</span>
                    <div class="endpoint-url">/api/token/refresh/</div>
                    <div class="auth-required">No authentication required</div>
                    
                    <h6>Request Body:</h6>
                    <div class="code-block">
{
  "refresh": "your_refresh_token_here"
}
                    </div>
                </div>
            </section>

            <!-- Products Section -->
            <section id="products" class="doc-section">
                <h2><i class="fas fa-box me-2"></i>Products</h2>
                <p>Manage your product catalog with these endpoints:</p>

                <div class="endpoint-card">
                    <h5>List All Products</h5>
                    <span class="endpoint-method method-get">GET</span>
                    <div class="endpoint-url">/api/products/</div>
                    <div class="auth-required">No authentication required</div>
                    
                    <h6>Query Parameters:</h6>
                    <ul>
                        <li><code>search</code> - Search in name, description, or category</li>
                        <li><code>category</code> - Filter by category ID</li>
                        <li><code>price__gte</code> - Minimum price</li>
                        <li><code>price__lte</code> - Maximum price</li>
                        <li><code>stock_status</code> - in_stock, low_stock, out_of_stock</li>
                        <li><code>page</code> - Page number for pagination</li>
                    </ul>
                    
                    <h6>Example:</h6>
                    <div class="code-block">
GET /api/products/?search=phone&category=1&price__gte=100&price__lte=1000
                    </div>
                </div>

                <div class="endpoint-card">
                    <h5>Get Product Details</h5>
                    <span class="endpoint-method method-get">GET</span>
                    <div class="endpoint-url">/api/products/{slug}/</div>
                    <div class="auth-required">No authentication required</div>
                    
                    <h6>Example:</h6>
                    <div class="code-block">
GET /api/products/iphone-15-pro/
                    </div>
                </div>

                <div class="endpoint-card">
                    <h5>Create Product</h5>
                    <span class="endpoint-method method-post">POST</span>
                    <div class="endpoint-url">/api/products/</div>
                    <div class="auth-required">Authentication required</div>
                    
                    <h6>Request Body:</h6>
                    <div class="code-block">
{
  "name": "iPhone 15 Pro",
  "description": "Latest iPhone with advanced features",
  "price": "999.99",
  "category": 1,
  "stock_quantity": 50
}
                    </div>
                </div>

                <div class="endpoint-card">
                    <h5>Update Product</h5>
                    <span class="endpoint-method method-put">PUT</span>
                    <div class="endpoint-url">/api/products/{slug}/</div>
                    <div class="auth-required">Authentication required</div>
                    
                    <h6>Request Body:</h6>
                    <div class="code-block">
{
  "name": "iPhone 15 Pro Max",
  "price": "1099.99",
  "stock_quantity": 45
}
                    </div>
                </div>

                <div class="endpoint-card">
                    <h5>Delete Product</h5>
                    <span class="endpoint-method method-delete">DELETE</span>
                    <div class="endpoint-url">/api/products/{slug}/</div>
                    <div class="auth-required">Authentication required</div>
                    <p class="text-muted">Note: This performs a soft delete (sets is_active to False)</p>
                </div>

                <div class="endpoint-card">
                    <h5>Bulk Operations</h5>
                    <span class="endpoint-method method-post">POST</span>
                    
                    <div class="auth-required">Staff/Superuser only</div>
                    
                    <h6>Bulk Update Example:</h6>
                    <div class="code-block">
{
  "product_ids": [1, 2, 3, 4, 5],
  "update_data": {
    "is_active": true,
    "stock_quantity": 100
  }
}
                    </div>
                </div>
            </section>

            <!-- Categories Section -->
            <section id="categories" class="doc-section">
                <h2><i class="fas fa-tags me-2"></i>Categories</h2>
                <p>Organize your products with category management:</p>

                <div class="endpoint-card">
                    <h5>List All Categories</h5>
                    <span class="endpoint-method method-get">GET</span>
                    <div class="endpoint-url">/api/categories/</div>
                    <div class="auth-required">No authentication required</div>
                </div>

                <div class="endpoint-card">
                    <h5>Get Category Details</h5>
                    <span class="endpoint-method method-get">GET</span>
                    <div class="endpoint-url">/api/categories/{slug}/</div>
                    <div class="auth-required">No authentication required</div>
                </div>

                <div class="endpoint-card">
                    <h5>Create Category</h5>
                    <span class="endpoint-method method-post">POST</span>
                    <div class="endpoint-url">/api/categories/</div>
                    <div class="auth-required">Authentication required</div>
                    
                    <h6>Request Body:</h6>
                    <div class="code-block">
{
  "name": "Electronics",
  "description": "Electronic devices and gadgets"
}
                    </div>
                </div>

                <div class="endpoint-card">
                    <h5>Update Category</h5>
                    <span class="endpoint-method method-put">PUT</span>
                    <div class="endpoint-url">/api/categories/{slug}/</div>
                    <div class="auth-required">Authentication required</div>
                </div>

                <div class="endpoint-card">
                    <h5>Delete Category</h5>
                    <span class="endpoint-method method-delete">DELETE</span>
                    <div class="endpoint-url">/api/categories/{slug}/</div>
                    <div class="auth-required">Authentication required</div>
                    <p class="text-muted">Note: This performs a soft delete (sets is_active to False)</p>
                </div>
            </section>

            <!-- Users Section -->
            <section id="users" class="doc-section">
                <h2><i class="fas fa-users me-2"></i>Users</h2>
                <p>Manage user accounts and profiles:</p>

                <div class="endpoint-card">
                    <h5>List All Users</h5>
                    <span class="endpoint-method method-get">GET</span>
                    <div class="endpoint-url">/api/users/</div>
                    <div class="auth-required">Authentication required</div>
                </div>

                <div class="endpoint-card">
                    <h5>Get User Details</h5>
                    <span class="endpoint-method method-get">GET</span>
                    <div class="endpoint-url">/api/users/{id}/</div>
                    <div class="auth-required">Authentication required</div>
                </div>

                <div class="endpoint-card">
                    <h5>Create User</h5>
                    <span class="endpoint-method method-post">POST</span>
                    <div class="endpoint-url">/api/users/</div>
                    <div class="auth-required">Staff/Superuser only</div>
                    
                    <h6>Request Body:</h6>
                    <div class="code-block">
{
  "username": "newuser",
  "email": "newuser@example.com",
  "password": "newpass123",
  "first_name": "New",
  "last_name": "User"
}
                    </div>
                </div>

                <div class="endpoint-card">
                    <h5>Update User</h5>
                    <span class="endpoint-method method-put">PUT</span>
                    <div class="endpoint-url">/api/users/{id}/</div>
                    <div class="auth-required">Authentication required</div>
                </div>

                <div class="endpoint-card">
                    <h5>Delete User</h5>
                    <span class="endpoint-method method-delete">DELETE</span>
                    <div class="endpoint-url">/api/users/{id}/</div>
                    <div class="auth-required">Staff/Superuser only</div>
                </div>

                <div class="endpoint-card">
                    <h5>User Profiles</h5>
                    <span class="endpoint-method method-get">GET</span>
                    <div class="endpoint-url">/api/profiles/</div>
                    <div class="endpoint-url">/api/profiles/{id}/</div>
                    <div class="auth-required">Authentication required</div>
                </div>
            </section>

            <!-- Examples Section -->
            <section id="examples" class="doc-section">
                <h2><i class="fas fa-lightbulb me-2"></i>Examples</h2>
                <p>Here are some practical examples of how to use the API:</p>

                <div class="endpoint-card">
                    <h5>Complete Workflow Example</h5>
                    <p>Follow these steps to create a product from scratch:</p>
                    
                    <div class="example-tabs">
                        <ul class="nav nav-tabs" id="workflowTabs" role="tablist">
                            <li class="nav-item" role="presentation">
                                <button class="nav-link active" id="step1-tab" data-bs-toggle="tab" data-bs-target="#step1" type="button" role="tab">Step 1: Register</button>
                            </li>
                            <li class="nav-item" role="presentation">
                                <button class="nav-link" id="step2-tab" data-bs-toggle="tab" data-bs-target="#step2" type="button" role="tab">Step 2: Login</button>
                            </li>
                            <li class="nav-item" role="presentation">
                                <button class="nav-link" id="step3-tab" data-bs-toggle="tab" data-bs-target="#step3" type="button" role="tab">Step 3: Create Category</button>
                            </li>
                            <li class="nav-item" role="presentation">
                                <button class="nav-link" id="step4-tab" data-bs-toggle="tab" data-bs-target="#step4" type="button" role="tab">Step 4: Create Product</button>
                            </li>
                        </ul>
                        
                        <div class="tab-content mt-3" id="workflowTabContent">
                            <div class="tab-pane fade show active" id="step1" role="tabpanel">
                                <h6>1. Register a new user:</h6>
                                <div class="code-block">
curl -X POST http://127.0.0.1:8000/api/auth/register/ \
  -H "Content-Type: application/json" \
  -d '{
    "username": "testuser",
    "email": "test@example.com",
    "password": "testpass123",
    "password_confirm": "testpass123",
    "first_name": "Test",
    "last_name": "User"
  }'
                                </div>
                            </div>
                            
                            <div class="tab-pane fade" id="step2" role="tabpanel">
                                <h6>2. Login to get JWT token:</h6>
                                <div class="code-block">
curl -X POST http://127.0.0.1:8000/api/auth/login/ \
  -H "Content-Type: application/json" \
  -d '{
    "username": "testuser",
    "password": "testpass123"
  }'
                                </div>
                                <p class="mt-2">Save the access token from the response.</p>
                            </div>
                            
                            <div class="tab-pane fade" id="step3" role="tabpanel">
                                <h6>3. Create a category:</h6>
                                <div class="code-block">
curl -X POST http://127.0.0.1:8000/api/categories/ \
  -H "Content-Type: application/json" \
  -H "Authorization: Bearer YOUR_ACCESS_TOKEN" \
  -d '{
    "name": "Electronics",
    "description": "Electronic devices and gadgets"
  }'
                                </div>
                                <p class="mt-2">Note the category ID from the response.</p>
                            </div>
                            
                            <div class="tab-pane fade" id="step4" role="tabpanel">
                                <h6>4. Create a product:</h6>
                                <div class="code-block">
curl -X POST http://127.0.0.1:8000/api/products/ \
  -H "Content-Type: application/json" \
  -H "Authorization: Bearer YOUR_ACCESS_TOKEN" \
  -d '{
    "name": "iPhone 15 Pro",
    "description": "Latest iPhone with advanced features",
    "price": "999.99",
    "category": 1,
    "stock_quantity": 50
  }'
                                </div>
                                <p class="mt-2">Congratulations! You've created a product using the API.</p>
                            </div>
                        </div>
                    </div>
                </div>

                <div class="endpoint-card">
                    <h5>Search and Filter Examples</h5>
                    <div class="row">
                        <div class="col-md-6">
                            <h6>Search for smartphones:</h6>
                            <div class="code-block">
GET /api/products/?search=smartphone
                            </div>
                        </div>
                        <div class="col-md-6">
                            <h6>Filter by price range:</h6>
                            <div class="code-block">
GET /api/products/?price__gte=100&price__lte=1000
                            </div>
                        </div>
                    </div>
                    
                    <div class="row mt-3">
                        <div class="col-md-6">
                            <h6>Filter by category:</h6>
                            <div class="code-block">
GET /api/products/?category=1
                            </div>
                        </div>
                        <div class="col-md-6">
                            <h6>Get low stock products:</h6>
                            <div class="code-block">
GET /api/products/?stock_status=low_stock
                            </div>
                        </div>
                    </div>
                </div>
            </section>

            <!-- Error Handling Section -->
            <section id="errors" class="doc-section">
                <h2><i class="fas fa-exclamation-triangle me-2"></i>Error Handling</h2>
                <p>The API returns appropriate HTTP status codes and error messages:</p>

                <div class="row">
                    <div class="col-md-6">
                        <div class="card">
                            <div class="card-header bg-success text-white">
                                <h6 class="mb-0">2xx Success</h6>
                            </div>
                            <div class="card-body">
                                <ul class="list-unstyled">
                                    <li><strong>200</strong> - OK (GET, PUT, DELETE)</li>
                                    <li><strong>201</strong> - Created (POST)</li>
                                </ul>
                            </div>
                        </div>
                    </div>
                    
                    <div class="col-md-6">
                        <div class="card">
                            <div class="card-header bg-warning text-dark">
                                <h6 class="mb-0">4xx Client Errors</h6>
                            </div>
                            <div class="card-body">
                                <ul class="list-unstyled">
                                    <li><strong>400</strong> - Bad Request</li>
                                    <li><strong>401</strong> - Unauthorized</li>
                                    <li><strong>403</strong> - Forbidden</li>
                                    <li><strong>404</strong> - Not Found</li>
                                </ul>
                            </div>
                        </div>
                    </div>
                </div>

                <div class="endpoint-card mt-3">
                    <h5>Error Response Format</h5>
                    <div class="code-block">
{
  "error": "Error message",
  "detail": "Detailed error information",
  "field_errors": {
    "field_name": ["Specific error for this field"]
  }
}
                    </div>
                    
                    <h6>Common Error Scenarios:</h6>
                    <ul>
                        <li><strong>401 Unauthorized</strong> - Missing or invalid JWT token</li>
                        <li><strong>403 Forbidden</strong> - Insufficient permissions</li>
                        <li><strong>400 Bad Request</strong> - Invalid data or missing required fields</li>
                        <li><strong>404 Not Found</strong> - Resource doesn't exist</li>
                    </ul>
                </div>
            </section>

            <!-- Testing Tools Section -->
            <section id="tools" class="doc-section">
                <h2><i class="fas fa-tools me-2"></i>Testing Tools</h2>
                <p>Here are some tools you can use to test the API:</p>

                <div class="row">
                    <div class="col-md-6">
                        <div class="card h-100">
                            <div class="card-body">
                                <h5 class="card-title"><i class="fas fa-terminal me-2"></i>cURL</h5>
                                <p class="card-text">Command-line tool for making HTTP requests. All examples in this documentation use cURL.</p>
                                <a href="https://curl.se/" class="btn btn-outline-primary btn-sm" target="_blank" rel="noopener">Download cURL</a>
                            </div>
                        </div>
                    </div>
                    
                    <div class="col-md-6">
                        <div class="card h-100">
                            <div class="card-body">
                                <h5 class="card-title"><i class="fas fa-paper-plane me-2"></i>Postman</h5>
                                <p class="card-text">Popular GUI tool for testing APIs with a user-friendly interface.</p>
                                <a href="https://www.postman.com/" class="btn btn-outline-primary btn-sm" target="_blank" rel="noopener">Download Postman</a>
                            </div>
                        </div>
                    </div>
                </div>

                <div class="row mt-3">
                    <div class="col-md-6">
                        <div class="card h-100">
                            <div class="card-body">
                                <h5 class="card-title"><i class="fab fa-python me-2"></i>Python Requests</h5>
                                <p class="card-text">Python library for making HTTP requests. Great for automation and testing.</p>
                                <div class="code-block">
pip install requests
                                </div>
                            </div>
                        </div>
                    </div>
                    
                    <div class="col-md-6">
                        <div class="card h-100">
                            <div class="card-body">
                                <h5 class="card-title"><i class="fab fa-js me-2"></i>JavaScript Fetch</h5>
                                <p class="card-text">Built-in browser API for making HTTP requests. Perfect for frontend integration.</p>
                                <div class="code-block">
fetch('/api/products/')
  .then(response => response.json())
  .then(data => console.log(data));
                                </div>
                            </div>
                        </div>
                    </div>
                </div>

                <div class="endpoint-card mt-3">
                    <h5>Quick Test with Python</h5>
                    <p>Here's a simple Python script to test the API:</p>
                    <div class="code-block">
import requests

# Base URL
base_url = "http://127.0.0.1:8000/api"

# Test public endpoints
response = requests.get(f"{base_url}/products/")
print(f"Products endpoint: {response.status_code}")
print(f"Found {len(response.json()['results'])} products")

# Test categories
response = requests.get(f"{base_url}/categories/")
print(f"Categories endpoint: {response.status_code}")
print(f"Found {len(response.json()['results'])} categories")
                    </div>
                </div>
            </section>

            <!-- Support Section -->
            <section class="doc-section">
                <h2><i class="fas fa-question-circle me-2"></i>Need Help?</h2>
                <div class="row">
                    <div class="col-md-6">
                        <div class="card">
                            <div class="card-body">
                                <h5 class="card-title"><i class="fas fa-book me-2"></i>Documentation</h5>
                                <ul>
                                    <li><a href="https://docs.djangoproject.com/" target="_blank" rel="noopener">Django Documentation</a></li>
                                    <li><a href="https://www.django-rest-framework.org/" target="_blank" rel="noopener">Django REST Framework</a></li>
                                    <li><a href="https://django-rest-framework-simplejwt.readthedocs.io/" target="_blank" rel="noopener">JWT Documentation</a></li>
                                </ul>
                            </div>
                        </div>
                    </div>
                    
                    <div class="col-md-6">
                        <div class="card">
                            <div class="card-body">
                                <h5 class="card-title"><i class="fas fa-code me-2"></i>API Explorer</h5>
                                <p>Use the built-in API explorer to test endpoints interactively:</p>
                                <a href="/api/" class="btn btn-primary">Open API Explorer</a>
                            </div>
                        </div>
                    </div>
                </div>
            </section>
        </div>
    </div>
</div>
{% endblock %}

{% block extra_js %}
<script>
// Smooth scrolling for navigation links
document.querySelectorAll('a[href^="#"]').forEach(anchor => {
    anchor.addEventListener('click', function (e) {
        e.preventDefault();
        const target = document.querySelector(this.getAttribute('href'));
        if (target) {
            target.scrollIntoView({
                behavior: 'smooth',
                block: 'start'
            });
        }
    });
});

// Copy code blocks to clipboard
document.querySelectorAll('.code-block').forEach(block => {
    const copyBtn = document.createElement('button');
    copyBtn.className = 'btn btn-sm btn-outline-secondary copy-btn';
    copyBtn.innerHTML = '<i class="fas fa-copy"></i> Copy';
    copyBtn.onclick = function() {
        navigator.clipboard.writeText(block.textContent.trim()).then(() => {
            copyBtn.innerHTML = '<i class="fas fa-check"></i> Copied!';
            setTimeout(() => {
                copyBtn.innerHTML = '<i class="fas fa-copy"></i> Copy';
            }, 2000);
        });
    };
    block.parentNode.insertBefore(copyBtn, block);
});

// Highlight current section in navigation
window.addEventListener('scroll', () => {
    const sections = document.querySelectorAll('.doc-section');
    const navLinks = document.querySelectorAll('.nav-link');
    
    let current = '';
    sections.forEach(section => {
        const sectionTop = section.offsetTop;
        const sectionHeight = section.clientHeight;
        if (window.pageYOffset >= sectionTop - 200) {
            current = section.getAttribute('id');
        }
    });
    
    navLinks.forEach(link => {
        link.classList.remove('active');
        if (link.getAttribute('href') === `#${current}`) {
            link.classList.add('active');
        }
    });
});
</script>
{% endblock %}
